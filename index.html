<!DOCTYPE html>
<html>
<head>
  <title>View PDF</title>
</head>
<body>
  <div id="pdf-container"></div> <!-- 用于显示所有 PDF 页面 -->

  <!-- 使用"type=module" 来加载模块化的 PDF.js -->
  <script type="module">
    // 使用模块导入 PDF.js
    import * as pdfjsLib from './pdfjs/pdf.js';

    // 设置 worker 文件路径
    pdfjsLib.GlobalWorkerOptions.workerSrc = './pdfjs/pdf.worker.mjs';

    // 设置 PDF 文件路径
    const url = 'PDFsam_merge.pdf'; // 确保 PDF 文件在同一个目录下

    // 加载并显示 PDF
    const loadingTask = pdfjsLib.getDocument(url);
    loadingTask.promise.then(function(pdf) {
      const pdfContainer = document.getElementById('pdf-container');

      // 循环渲染每一页
      for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
        pdf.getPage(pageNum).then(function(page) {
          const scale = 1.5;
          const viewport = page.getViewport({ scale: scale });

          // 创建 canvas 元素以显示每一页
          const canvas = document.createElement('canvas');
          pdfContainer.appendChild(canvas);

          const context = canvas.getContext('2d');
          canvas.height = viewport.height;
          canvas.width = viewport.width;

          const renderContext = {
            canvasContext: context,
            viewport: viewport
          };
          page.render(renderContext);
        });
      }
    });
  </script>
</body>
</html>
